本程序集中简单实现了单纯形法，可以对线性模型进行求解。

本程序集将线性求解的命名空间独立为`CalCore.LP`。因此，使用先行求解前，只需要直接引用该命名空间即可。
```C#
using CalCore.LP;
```

下文将提供本程序集的使用方法，详细可以直接参考程序集使用时弹出的提示窗口。下文将以导入以下线性求解模型为例：

maxZ = 10\*x1+5\*x2

s.t.:

​	3\*x1 + 4\*x2 ≤ 9 

​	5\*x1 + 2\*x2 ≤ 8 

​	x1,x2≥0

> 其他提示💡：模型中默认所有变量都大于等于0。如果需要某个变量取值范围在R上，则需要手动设置为两个变量，如：x1 -> (x1-x2)，达到(x1-x2)整体取值范围在R的效果。（这块我懒得做了😂)

# 使用ModelBuilder处理模型
以下将使用`ModelBuilder`类处理线性规划模型。ModelBuilder类将会对输入的模型进行标准化。如果有必要，会使用两阶段求解。如果模型满足以下条件将使用两阶段法进行求解：
* 约束方程中有≥的约束
* 约束方程中有=的约束

`ModelBuilder`的标准化实现是将`<=`的情况都添加了松弛变量进行求解，对`>=`和`==`的情况添加辅助变量求解，这样就能出现单位矩阵方便操作。由于`==`和`>=`添加的松弛变量其实是不必要的，所以在两阶段法的第一阶段对其进行去除处理。

> 如果我的做法有误或有更好的做法可以告诉我😘

## 模型的导入
### 创建模型对象
创建模型对象时，要求同时输入两个参数：
* 目标函数求解最大值/最小值
* 目标函数系数

对于上述模型中的目标函数 10\*x1+5\*x2 求最大值，应这样创建模型对象：
```C#
LPBuilder lp = new LPBuilder("max", new double[] { 10, 5 });
```

### 添加模型约束
约束可以逐个添加，也可以一次性添加。
#### 逐条约束添加
逐条约束添加时，每次都可以指定约束方程的系数、符号和右端项值。
| 参数           | 解释                                             |
| -------------- | ------------------------------------------------ |
| 约束方程符号   | 可以指定约束方程左右关系为`"<="`、`"=="`或`">="` |
| 约束方程右端项 | b值，为一个double类型的数字                      |
对于上述模型中的约束方程，添加方式如下：
```C#
lp.AddConstraint(new double[] { 3, 4 }, "<=", 9);
lp.AddConstraint(new double[] { 5, 2 }, "<=", 8);
```
#### 一次性添加约束
如果一次性添加所有约束，则需要以二维数组的方式以标准形式添加。二维数组中需要包括每条约束的系数及其右端项。本库中认定的约束标准形式限制符号为`<=`。一般的标准形式认为限制符号为`<=`。
对于上述模型中的约束方程，添加方式如下：
```C#
lp.SetConstraints(new double[,]
{
    { 3, 4, 9 },
    { 5, 2, 8 }
});
```
> 所以，本程序集不支持使用矩阵导入约束的方式将无法添加等号约束。（不然还要添加`Aeq`和`beq`的可选参数😴）

## 模型求解
当创建了模型对象，约束也导入完毕后，可以使用`Solve()`函数对模型进行求解。
接上文示例，求解方式为：
```C#
lp.Solve();
```
`Solve()`函数中有一个可选参数`maxIterate`，可以指定最大迭代求解次数。如果函数写为：
```C#
lp.Solve(100);
```
则求解最多迭代100次就会停止并返回迭代结果。

# 使用Optimize直接求解标准型
由于`Simplex.Optimize()`只接受标准型，因此使用它进行求解是更高级的做法本程序集中对标准型的定义有如下两点：
* 目标函数求最大(max)
* 约束方程全为等式约束(=)

`Simplex.Optimize()`函数用法如下：
```C#
Optimize(double[] objFunc, Matrix coeff, [int isMax], [uint? maxIterate], [double[] sig])
```
| 参数         | 解释                                                 |
| ------------ | ---------------------------------------------------- |
| `objFunc`    | 目标函数数组                                         |
| `coeff`      | 约束系数矩阵，包括右端项                             |
| `isMax`      | 可选，是否求最大。默认求最大，值为1；求最小设为-1    |
| `maxIterate` | 可选，最大迭代次数。不输入时默认值为null，不进行限制 |
| `sig`        | 可选，初始检验数行                                   |

`Optimize`函数执行完毕后将返回一个`SimplexItem`对象。如果求解失败，返回值将为`null`。

对于示例模型，需要手动添加松弛变量后再使用`Simplex.Optimize`求解：
```C#
Simplex.Optimize(
    new double[] { 10, 5, 0, 0 },
    new CalCore.Matrix(new double[,] { { 3, 4, 1, 0, 9 }, { 5, 2, 0, 1, 8 } })
);
```