æ­¤å¤„åªæ˜¯æ”¯æŒä¸€ä¸ªç®€å•çš„çŸ©é˜µç±»å‹ã€‚å¦‚æœéœ€è¦é«˜çº§ç”¨æ³•ï¼Œè¯·ä½¿ç”¨ [Math.NET Numerics](https://numerics.mathdotnet.com/)

# çŸ©é˜µä½¿ç”¨
è¿™æ˜¯ä¸€ä¸ªåŸºäºdoubleç±»å‹å†™äº†ä¸€ä¸ªç®€æ˜“ç‰ˆçš„çŸ©é˜µç±»å‹ï¼Œä¸åŒ…æ‹¬çŸ©é˜µæ±‚é€†ç­‰é«˜çº§åŠŸèƒ½ã€‚ç›®å‰å·²æœ‰çš„ç®€æ˜“åŠŸèƒ½ï¼š
* ä»doubleç±»å‹æ•°ç»„å¯¼å…¥çŸ©é˜µ
* æ–°å»º`n*m`å¤§å°çš„çŸ©é˜µ
* çŸ©é˜µåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ï¼Œå‡åŒ…å«çŸ©é˜µå¯¹æ•°å€¼çš„è¿ç®—

åº“ä¸­åŒ…å«ä¸¤ç§ç±»å‹çš„çŸ©é˜µï¼š
- `Matrix`ï¼šæ™®é€šç±»å‹çš„çŸ©é˜µï¼Œè®°å½•æ•´ä¸ªçŸ©é˜µçš„å½¢çŠ¶ã€‚
- `DenseMatrix`ï¼šç¨ å¯†å‹çŸ©é˜µï¼Œä»…è®°å½•è¡Œã€åˆ—ã€å€¼ã€‚

## æ–°å»ºçŸ©é˜µ
### ç›´æ¥åˆ›å»ºæ–°çŸ©é˜µ
```C#
//æ–°å»ºå¤§å°ä¸ºn*mçš„0çŸ©é˜µï¼š
Matrix mt = new Matrix(2, 3); //åˆ›å»ºä¸€ä¸ª2è¡Œ3åˆ—çš„çŸ©é˜µ

//æ–°å»ºåŒ…å«å…·ä½“æ•°å€¼çš„çŸ©é˜µ
Matrix mt1 = new Matrix(new double[,] { { 1, 2, 3 }, { 4, 5, 6 } }); //mt1:[1,2,3;4,5,6]
Matrix mt2 = new Matrix(new double[,] { { 2, 1 }, { 3, 2 }, { 2, 4 } }); //mt2:[2,1;3,2;2,4]

//é€šè¿‡stringå¯¼å…¥çŸ©é˜µ
//stringçš„æ ¼å¼ç±»ä¼¼Matlabçš„çŸ©é˜µæ ¼å¼ï¼Œä½†åªæ¥å—","ä½œä¸ºåˆ—åˆ†éš”ç¬¦ï¼Œ";"ä½œä¸ºè¡Œåˆ†éš”ç¬¦
Matrix mtstr = new Matrix("[1,2,3;4,5,6]");
Console.WriteLine(mtstr.ValueString);
// mtstr
// [1 2 3;
//  4 5 6]
```

### æ ¹æ®åŸæœ‰çŸ©é˜µ/ç¨ å¯†çŸ©é˜µåˆ›å»ºæ–°çŸ©é˜µ
```C#
//æ ¹æ®ä¸€ä¸ªå·²çŸ¥çŸ©é˜µå¤åˆ¶ä¸€ä¸ªçŸ©é˜µ
Matrix newMt = new Matrix(mt1);
```

```C#
//æ ¹æ®å°†ç¨ å¯†çŸ©é˜µDenseMatrixè½¬æ¢ä¸ºæ™®é€šçŸ©é˜µMatix:
Matrix matrix = new Matrix(dmt, rows, cols, [baseNum]);
```
| å‚æ•°      | å«ä¹‰                              |
| --------- | --------------------------------- |
| `dmt`     | DenseMatrixå¯¹è±¡                   |
| `rows`    | æ–°å»ºçŸ©é˜µçš„è¡Œæ•°                    |
| `cols`    | æ–°å»ºçŸ©é˜µçš„åˆ—æ•°                    |
| `baseNum` | å¯é€‰å‚æ•°ã€‚çŸ©é˜µçš„èƒŒæ™¯æ•°å€¼ï¼Œé»˜è®¤ä¸º0 |

ç¤ºä¾‹
```C#
Matrix mt3 = new Matrix(dmt, 9, 9);
// DenseMatrix dmt
// [1 1 2;
//  7 8 8;
//  7 7 8]
// Matrix mt3
// [2 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 8 8 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0]
```

### å°†åŸæœ‰çŸ©é˜µå®‰æ’åœ¨æ–°çŸ©é˜µä¸­
å‡½æ•°
```C#
// å°†åŸæœ‰çŸ©é˜µå®‰æ’åœ¨æ–°çŸ©é˜µçš„å·¦ä¸Šè§’
Matrix matrix = new Matrix(matrix0, rows, cols)
```

```C#
// å°†åŸæœ‰çŸ©é˜µå®‰æ’åœ¨æ–°çŸ©é˜µçš„æŒ‡å®šè¡Œåˆ—ä½ç½®
Matrix matrix = new Matrix(matrix0, rows, cols, row0, col0)
```
å‡½æ•°å‚æ•°åˆ—è¡¨
| å‚æ•°      | å«ä¹‰       |
| --------- | ---------- |
| `matrix0` | åŸçŸ©é˜µ     |
| `rows`    | æ–°çŸ©é˜µè¡Œæ•° |
| `cols`    | æ–°çŸ©é˜µåˆ—æ•° |
| `row0`    | æŒ‡å®šè¡Œä½ç½® |
| `col0`    | æŒ‡å®šåˆ—ä½ç½® |

ç”¨æ³•ç¤ºä¾‹
```C#
// åˆ›å»ºåŸæœ‰çŸ©é˜µmt1
Matrix mt1 = new Matrix(new double[,] { { 1, 2, 3 }, { 4, 5, 6 } });
Console.WriteLine($"mt1\n{mt1.ValueString}");
// mt1
// [1 2 3;
//  4 5 6]

// åˆ›å»º4*5çš„æ–°çŸ©é˜µï¼Œå°†åŸæœ‰çŸ©é˜µå®‰æ”¾åœ¨å·¦ä¸Šè§’
Matrix mt2 = new Matrix(mt1, 4, 5);
Console.WriteLine($"mt2\n{mt2.ValueString}");
// mt2
// [1 2 3 0 0;
//  4 5 6 0 0;
//  0 0 0 0 0;
//  0 0 0 0 0]

// åˆ›å»º4*5çš„æ–°çŸ©é˜µï¼Œå°†åŸæœ‰çŸ©é˜µå®‰æ”¾åœ¨2è¡Œ2åˆ—
Matrix mt3 = new Matrix(mt1, 4, 5, 2, 2);
Console.WriteLine($"mt3\n{mt3.ValueString}");
// mt3
// [0 0 0 0 0;
//  0 1 2 3 0;
//  0 4 5 6 0;
//  0 0 0 0 0]
```

## æ–°å»ºç¨ å¯†çŸ©é˜µ
```C#
//ç›´æ¥åˆ›å»ºæ–°çš„DenseMatrixå¯¹è±¡
DenseMatrix dmt = new DenseMatrix();

//é€šè¿‡å·²çŸ¥çŸ©é˜µmtåˆ›å»ºDenseMatrixï¼ˆå°†Matrixè½¬æ¢ä¸ºæ–°çš„DenseMatrixå¯¹è±¡ï¼‰
DenseMatrix dmt2 = new DenseMatrix(Matrix mt, [double baseNum]);

//é€šè¿‡DenseMatrixItemçš„Liståˆ›å»ºDenseMatrix
DenseMatrix dmt3 = new DenseMatrix(List<DenseMatrixItem> list);
```

ä¸ºäº†è¿›ä¸€æ­¥ä½“ç°å¤åˆ¶å’Œæ˜ å°„(å¼•ç”¨)çš„åŒºåˆ«ï¼Œå¯¹`DenseMatrix`å¯¹è±¡åšäº†å¤åˆ¶å®éªŒï¼Œè§[é™„å½•1](#çŸ©é˜µå¤åˆ¶å®éªŒ)ã€‚

### å°†Matrixè½¬æ¢ä¸ºæ–°çš„DenseMatrixå¯¹è±¡

```C#
DenseMatrix resultd = new DenseMatrix(result);
Console.WriteLine($"RowMax={resultd.RowMax},ColMax={resultd.ColMax}");
Console.WriteLine(resultd.ValueString);
// result:
// [0 1 0 0 0 0 0 0 0;
//  0 0 0 1 0 0 0 0 0;
//  0 0 0 0 1 0 0 0 0;
//  0 0 0 0 1 0 0 0 0;
//  0 0 0 0 0 0 1 0 0;
//  0 0 0 0 0 0 1 0 1;
//  0 0 0 0 0 0 0 1 0;
//  0 0 0 0 0 0 0 0 0;
//  0 0 0 0 0 0 0 0 0]

// è¾“å‡º
// RowMax=7,ColMax=9
// [1 2 1;
//  2 4 1;
//  3 5 1;
//  4 5 1;
//  5 7 1;
//  6 7 1;
//  6 9 1;
//  7 8 1]
```
å½“`result`çŸ©é˜µä¸­çš„0å…¨ä¸º`double.PositiveInfinity`æˆ–å…¶ä»–å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`baseNum`å‚æ•°è®¾ç½®çŸ©é˜µèƒŒæ™¯æ•°å€¼ä¸ºæŒ‡å®šå€¼`double.PositiveInfinity`æˆ–å…¶ä»–å€¼ã€‚

### é€šè¿‡DenseMatrixItemçš„Liståˆ›å»ºDenseMatrix
```C#
List<DenseMatrixItem> list = new List<DenseMatrixItem>()
{
    new DenseMatrixItem(1, 2, 1),
    new DenseMatrixItem(2, 2, 2),
    new DenseMatrixItem(1, 1, 3)
};
DenseMatrix dmt = new DenseMatrix(list);
Console.WriteLine(dmt.ValueString);
// [1 2 1;
//  2 2 2;
//  1 1 3]
```

## çŸ©é˜µçš„å€¼ä¿®æ”¹
### æ ¹æœ¬æ–¹æ³•ï¼ˆç¼–ç¨‹ç†è§£ï¼‰
ä»¥ä¸Šæ–¹çš„mtçŸ©é˜µä¸ºä¾‹ï¼š
```C#
mt.Value[0,0] = 1; //å°†çŸ©é˜µ1è¡Œ1åˆ—å¯¹åº”çš„å…ƒç´ å€¼ä¿®æ”¹ä¸º1
```
å¯¹Valueçš„ä¿®æ”¹æ˜¯æœ€ç›´æ¥çš„ä¿®æ”¹ã€‚
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š`mt.Value`æ˜¯ä¸€ä¸ª`double`ç±»å‹çš„äºŒç»´çŸ©é˜µã€‚å¦‚æœä¿®æ”¹åçŸ©é˜µçš„å¤§å°å‘ç”Ÿæ”¹å˜ï¼Œ`mt.Row`å’Œ`mt.Col`çš„å€¼ä¹Ÿä¼šè¢«åŠ¨æ”¹å˜ã€‚

### æ•°å­¦ç†è§£çš„æ–¹æ³•
Matrixç±»ä¸­æä¾›äº†ä¸¤ä¸ªå‡½æ•°è¿›è¡ŒåŸºæœ¬çš„çŸ©é˜µå€¼æ“ä½œã€‚
#### Set()
`[matrix].Set(row, col, value)`ï¼Œå°†è¡Œ`row`åˆ—`col`çš„å€¼è®¾ç½®ä¸º`value`ã€‚
```C#
Matrix mt = new Matrix(3,3);
mt.Set(1,1,1);
mt.Set(2,2,2);
mt.Set(3,3,3);
Console.WriteLine(mt.ValueString);

// ç»“æœ
// [1 0 0;
//  0 2 0;
//  0 0 3]
```

#### Get()
`[matrix].Get(row, col)`ï¼Œé€šè¿‡è¡Œæ•°åˆ—æ•°å¯»æ‰¾å…ƒç´ å€¼ã€‚è¿™ä¹Ÿå°†è¿”å›ä¸€ä¸ª`double`ç±»å‹çš„å€¼ã€‚
```C#
Matrix mt = new Matrix(3,3);
mt.Set(1,1,1);
mt.Set(2,2,2);
mt.Set(3,3,3);
Console.WriteLine(mt.Get(1,1));
Console.WriteLine(mt.Get(2,2));
Console.WriteLine(mt.Get(1,2));

// ç»“æœ
// 1
// 2
// 0
```

ç¨ å¯†çŸ©é˜µä¹Ÿæ”¯æŒ`Get()`æ“ä½œ
```C#
Matrix mt = new Matrix(3,3);
mt.Set(1,1,1);
mt.Set(2,2,2);
mt.Set(3,3,3);
// å¯¼å…¥çŸ©é˜µï¼š
// [1 0 0;
//  0 2 0;
//  0 0 3]

// ç¨ å¯†çŸ©é˜µæ“ä½œï¼š
dmt = new DenseMatrix(mt);
Console.WriteLine(dmt.Get(1, 1)); //1
Console.WriteLine(dmt.Get(2, 2)); //2
Console.WriteLine(dmt.Get(1, 2)); //0
```

## çŸ©é˜µè¿ç®—
### åŠ å‡æ³•
åŠ æ³•ä¸å‡æ³•åŒç†

çŸ©é˜µä¸çŸ©é˜µç›¸åŠ 
```C#
//çŸ©é˜µä¹‹é—´çš„è¿ç®—ï¼ˆæ¯ä¸ªæ•°å€¼ç›¸åŠ ï¼‰
// mt1
// [1 4;
//  2 5;
//  3 6]
Matrix newMt1 = mt1 + mt1;
// newMt1
// [2 8;
//  4 10;
//  6 12]

// dmt3
// [1 2 1;
//  2 2 2;
//  1 1 4;
//  2 1 6]
// dmt5
// [1 2 1;
//  2 2 2;
//  1 1 3]
DenseMatrix dmt = dmt3 + dmt5;
// dmt
// [1 2 2;
//  2 2 4;
//  1 1 7;
//  2 1 6]
```

çŸ©é˜µä¸æ•°å€¼ç›¸åŠ 
```C#
//çŸ©é˜µä¸æ•°å€¼ç›¸åŠ 
Matrix Mt11 = mt1 + 1; //[2 5; 3 6; 4 7]
```
## ä¹˜æ³•
```C#
Matrix mt12 = mt1 * mt2; //[14 17; 35 38]
```
## è½¬ç½®
è½¬ç½®å‡½æ•°ä¼šå°†é€‰å®šçš„çŸ©é˜µè½¬ç½®ï¼Œå¹¶è¿”å›å€¼ã€‚
```C#
//è½¬ç½®å…ƒç´ æœ¬èº«
mt1.T();
Console.WriteLine($"{mt1.ValueString}\n");
```
```C#
//è½¬ç½®æ“ä½œæœ¬èº«ä¹Ÿä¼šæœ‰è¿”å›å€¼
Console.WriteLine($"{mt1.T().ValueString}\n");
```
ä¸¤ç§æ“ä½œå¾—åˆ°çš„ç»“æœå‡ä¸º`[1 4; 2 5; 3 6]`
## æ±‚å’Œå€¼
è·å–çŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„æ±‚å’Œç»“æœ
```C#
Console.WriteLine(mt1.Sum); //21
```

## å­çŸ©é˜µ
### è·å–å­çŸ©é˜µ
ç”¨æ³•:
`[matrix].GetSubMatrix([èµ·å§‹è¡Œ], [èµ·å§‹åˆ—], [æˆªå–è¡Œæ•°], [æˆªå–åˆ—æ•°])`
```C#
// mt1:
// [2 5;
//  3 6;
//  4 7]
Console.WriteLine($"{mt1.GetSubMatrix(1, 1, 2, 2).ValueString}\n");
// æˆªå–ç»“æœ
// [2 5;
//  3 6]
```
### æˆªå–è¡Œ/åˆ—
æˆªå–è¡Œå’Œåˆ—åŒç†ã€‚æœ‰å‡½æ•°å¦‚ä¸‹ï¼š
| å‡½æ•°å                 | å‚æ•°è§£é‡Š                                                                       |
| ---------------------- | ------------------------------------------------------------------------------ |
| `GetRow(row)`          | æˆªå–çŸ©é˜µä¸­æŸè¡Œï¼Œ`row`ä¸ºéœ€è¦æˆªå–çš„è¡Œå·ï¼Œä»1å¼€å§‹è®°èµ·                             |
| `GetRows(startRow, n)` | æˆªå–çŸ©é˜µä¸­æŸå‡ è¡Œï¼Œ`startRow`ä¸ºå¼€å§‹æˆªå–çš„è¡Œå·ï¼Œä»1å¼€å§‹è®°èµ·ï¼Œ`n`ä¸ºéœ€è¦æˆªå–çš„è¡Œæ•° |
| `GetCol(col)`          | æˆªå–çŸ©é˜µä¸­æŸåˆ—ï¼Œ`col`ä¸ºéœ€è¦æˆªå–çš„åˆ—å·ï¼Œä»1å¼€å§‹è®°èµ·                             |
| `GetCols(startCow, n)` | æˆªå–çŸ©é˜µä¸­æŸå‡ åˆ—ï¼Œ`startCow`ä¸ºå¼€å§‹æˆªå–çš„åˆ—å·ï¼Œä»1å¼€å§‹è®°èµ·ï¼Œ`n`ä¸ºéœ€è¦æˆªå–çš„åˆ—æ•° |

ä»¥æˆªå–åˆ—ä¸ºä¾‹
```C#
// mt1:
// [2 3 4;
//  5 6 7]
Console.WriteLine($"{mt1.GetCols(2, 2).ValueString}\n");
// [3 4;
//  6 7]
Console.WriteLine($"{mt1.GetCol(2).ValueString}\n");
// [3;
//  6]
```

### è·å–æŒ‡å®šå€¼çš„è¡Œåˆ—åæ ‡
æ ¹æ®è¾“å…¥çš„æŒ‡å®šå€¼åœ¨çŸ©é˜µä¸­å¯»æ‰¾ç¬¦åˆçš„å…ƒç´ çš„è¡Œåˆ—åæ ‡åˆ—è¡¨ï¼Œç”¨çŸ©é˜µè¡¨ç¤º
```C#
Console.WriteLine(mt2.GetList(2).ToString()); // [1 1; 2 2; 3 1]
```
ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‡½æ•°è·å–æœ€å°å€¼å’Œæœ€å¤§å€¼çš„è¡Œåˆ—ä½ç½®åˆ—è¡¨
```C#
//å‡½æ•°ä½¿ç”¨æ–¹æ³•åŒä¸Šï¼Œå½¢å¼å¦‚ä¸‹
[çŸ©é˜µå¯¹è±¡].GetMinList();
[çŸ©é˜µå¯¹è±¡].GetMaxList();
```

## å±æ€§
| å±æ€§          | ä½œç”¨                                                                                            |
| ------------- | ----------------------------------------------------------------------------------------------- |
| `Row`         | å®æ—¶è·å–å¹¶è¿”å›çŸ©é˜µçš„è¡Œæ•°                                                                        |
| `Col`         | å®æ—¶è·å–å¹¶è¿”å›çŸ©é˜µçš„åˆ—æ•°                                                                        |
| `ValueString` | è¿”å›è½¬åŒ–ä¸ºMatlabæ ¼å¼çš„å­—ç¬¦ä¸²çš„çŸ©é˜µï¼Œå¦‚`[1 2;\n3 4]`ï¼ˆä¸éœ€è¦æ¢è¡Œç¬¦'\n'çš„ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ToString()ï¼‰ |

# é™„å½•
## çŸ©é˜µå¤åˆ¶å®éªŒ
åœ¨ç¼–å†™`DenseMatrix(DenseMatrix dmt)`çš„åˆå§‹åŒ–æ–¹æ³•æ—¶ï¼Œå‘ç°ä½¿ç”¨`Value = new List(DenseMatrixItem)`ä¹Ÿä¼šæ˜ å°„åˆ°åŸæ¥çš„`DenseMatrixItem`ä¸­ï¼Œæ˜¯ç”±äº`DenseMatrixItem`ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ²¡æœ‰è¿›è¡Œæ·±æ‹·è´ã€‚æ‰€ä»¥åªèƒ½é€šè¿‡`Set()`æ–¹æ³•é€æ¡æ–°å»ºæ·»åŠ è®°å½•ã€‚

ç»ˆäºææ¸…æ¥šè¿™ä¸€éƒ¨åˆ†äº†ğŸ˜‚
```C#
// åˆ›å»ºDenseMatrixItemæ•°ç»„ï¼Œé€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºDenseMatrixå¯¹è±¡
DenseMatrixItem[] array = new DenseMatrixItem[3] {
    new DenseMatrixItem(1, 2, 1), new DenseMatrixItem(2, 2, 2), new DenseMatrixItem(1, 1, 3)
};

DenseMatrix dmt3 = new DenseMatrix(array); //é€šè¿‡æ•°ç»„çš„æ–¹å¼æ–°å»ºå¯¹è±¡
Console.WriteLine("dmt3=\n" + dmt3.ValueString);
// dmt3=
// [1 2 1;
//  2 2 2;
//  1 1 3]
DenseMatrix dmt4 = dmt3; //ç›´æ¥å¼•ç”¨
Console.WriteLine("dmt4=\n" + dmt4.ValueString);
// dmt4=
// [1 2 1;
//  2 2 2;
//  1 1 3]
DenseMatrix dmt5 = new DenseMatrix(dmt3); //å¤åˆ¶å¯¹è±¡
Console.WriteLine("dmt5=\n" + dmt5.ValueString);
// dmt5=
// [1 2 1;
//  2 2 2;
//  1 1 3]

// æ›´æ”¹å€¼
dmt3.Set(1, 1, 4);

// æŸ¥çœ‹ç¨ å¯†çŸ©é˜µä¸­çš„å€¼æ˜¯å¦å˜åŒ–
Console.WriteLine("dmt3=\n" + dmt3.ValueString);
// dmt3=
// [1 2 1;
//  2 2 2;
//  1 1 4]
// (å‘ç”Ÿå˜åŒ–)
Console.WriteLine("dmt4=\n" + dmt4.ValueString);
// dmt4=
// [1 2 1;
//  2 2 2;
//  1 1 4]
// (å‘ç”Ÿå˜åŒ–)
Console.WriteLine("dmt5=\n" + dmt5.ValueString);
// dmt5=
// [1 2 1;
//  2 2 2;
//  1 1 3]
// (æ²¡æœ‰å˜åŒ–)
```